<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mật Mã Rương Báu - Màn Hình GV (Chỉnh sửa)</title>

<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
<script>
window.MathJax = {
  tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
  svg: { fontCache: 'global' }
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
body {
  font-family:'Arial',sans-serif;
  background:#1e1e1e;
  color:#fff;
  margin:0;
  padding:0;
  overflow-x:hidden;
}
h1 { color:#f1c40f; margin:12px 0; text-align:center; }
#timer {
  position:fixed;
  top:8px; right:12px;
  font-size:2.2em; font-weight:bold;
  color:#e74c3c; background:#f1c40f;
  padding:4px 12px; border-radius:8px;
  display:none;
}

/* === QR ở giao diện đầu === */
#qr-list {
  display:flex !important;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
  gap:12px;
  margin-top:20px;
}
.qr-item {
  width:180px;
  margin:10px;
  padding:10px;
  border-radius:8px;
  background:white;
  color:#333;
  text-align:center;
  font-weight:bold;
}
.qr-item img {
  width:150px; height:150px;
  border:2px solid #333;
  margin-bottom:5px;
}

/* === GIAO DIỆN 2 === */
#game-wrapper { display:none; }
.game-layout {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-start;
  width: 100%;
  margin: 0;
  padding: 0 10px;
  box-sizing: border-box;
}

/* Cột trái: các đội */
#team-rows-container {
  flex: 1;
  margin-right: 15px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

/* Cột phải: hàng đợi */
#submission-queue-area {
  width: 120px;
  background: #34495e;
  border-radius: 10px;
  padding: 8px;
  height: calc(100vh - 40px);
  overflow-y: auto;
  position: fixed;
  right: 0;
  top: 0;
}
#submission-queue-area h2 {
  font-size: 1em;
  text-align: center;
  color: #f1c40f;
  margin-bottom: 10px;
}

/* === KHUNG MỖI ĐỘI === */
.team-row {
  display:flex;
  align-items:center;
  justify-content:flex-start;
  width:100%;
  padding:8px 18px;
  border-radius:10px;
  box-shadow:0 2px 5px rgba(0,0,0,0.4);
  min-height:95px;
}
.team-red{background:#e74c3c;}
.team-blue{background:#3498db;}
.team-green{background:#2ecc71;}
.team-yellow{background:#f1c40f;color:#333;}
.team-purple{background:#9b59b6;}

.team-score-control {
  width:130px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
}
.team-score-value {
  font-size:2.5em;
  font-weight:900;
  background:rgba(255,255,255,0.25);
  padding:2px 12px;
  border-radius:8px;
  margin-bottom:2px;
}
.team-name {
  font-size:1.1em;
  margin-bottom:4px;
}
.team-status-area {
  display:flex;
  justify-content:center;
  align-items:center;
  margin-top:5px;
}
.q-status-item {
  width:28px;
  height:28px;
  border-radius:50%;
  font-size:1em;
  font-weight:bold;
  color:white;
  background:#2980b9;
  display:flex;
  justify-content:center;
  align-items:center;
}

.team-question-area {
  flex:1;
  padding-left:20px;
}
.q-number {
  font-weight:bold;
  font-size:1.1em;
  margin-bottom:2px;
}
.q-text {
  font-size:2.3em;
  font-weight:700;
  line-height:1.3;
}

/* Hàng đợi duyệt đáp án */
.submission-item {
  padding:8px;
  margin-bottom:8px;
  background:#2c3e50;
  border-radius:6px;
  display:flex;
  flex-direction:column;
  align-items:center;
  border-left:4px solid #f1c40f;
}
.submission-item b { color:#f1c40f; }
.submission-item button {
  padding:5px 10px;
  background:#e67e22;
  color:white;
  border:none;
  border-radius:5px;
  font-weight:bold;
  margin-top:5px;
  font-size:0.9em;
}
</style>
</head>

<body>
  <h1>MẬT MÃ RƯƠNG BÁU: 5 ĐỘI TRANH TÀI</h1>
  <div id="qr-list"></div>

  <button id="startBtn" onclick="startGame()" style="padding:12px 22px;font-size:1.2em;background:#f1c40f;color:#222;border:none;border-radius:8px;margin:20px;font-weight:bold;cursor:pointer;">
    BẮT ĐẦU PHI VỤ!
  </button>

  <div id="game-wrapper">
    <div id="timer">10:00</div>
    <div class="game-layout">
      <div id="team-rows-container"></div>
      <div id="submission-queue-area">
        <h2>HÀNG ĐỢI DUYỆT ĐÁP ÁN</h2>
      </div>
    </div>
  </div>

<script>
const teams = [
  { name: "Đội Đỏ", color: "team-red", id: "red" },
  { name: "Đội Xanh", color: "team-blue", id: "blue" },
  { name: "Đội Lục", color: "team-green", id: "green" },
  { name: "Đội Vàng", color: "team-yellow", id: "yellow" },
  { name: "Đội Tím", color: "team-purple", id: "purple" }
];

window.onload = function() {
  const qrList = document.getElementById("qr-list");
  qrList.innerHTML = "";
  const baseURL = location.href.replace(/[^/]*$/, "") + "hs.html";
  teams.forEach(team => {
    const div = document.createElement("div");
    div.className = "qr-item";
    div.innerHTML = `<div>${team.name}</div><div id="qr-${team.id}"></div>`;
    qrList.appendChild(div);
    new QRCode(document.getElementById("qr-" + team.id), {
      text: `${baseURL}?teamId=${team.id}`,
      width: 150,
      height: 150
    });
  });
};

function startGame(){
  document.getElementById("qr-list").style.display="none";
  document.getElementById("startBtn").style.display="none";
  document.getElementById("game-wrapper").style.display="block";
  renderTeams();
  MathJax.typeset();
}

function renderTeams(){
  const container = document.getElementById("team-rows-container");
  container.innerHTML = "";
  teams.forEach(team=>{
    const row=document.createElement("div");
    row.className=`team-row ${team.color}`;
    row.innerHTML=`
      <div class="team-score-control">
        <div class="team-score-value" id="score-${team.id}">0</div>
        <div class="team-name">${team.name}</div>
        <div class="team-status-area"><div class='q-status-item'>1</div></div>
      </div>
      <div class="team-question-area">
        <div class="q-number">Câu 1</div>
        <div class="q-text">Cho CSC có $u_1=3$, $d=2$. Tìm $u_{10}$.</div>
      </div>
    `;
    container.appendChild(row);
  });
}
</script>
</body>
</html>
